---
title: "Acute and Therapy Splits"
always_allow_html: yes
output:
  html_document:
    toc: yes
    toc_depth: '3'
    df_print: paged
  html_vignette:
    toc: yes
    toc_depth: 3
    vignette: >
      %\VignetteIndexEntry{Acute and Therapy Splits}
      %\VignetteEngine{knitr::rmarkdown}
      %\VignetteEncoding{UTF-8}
  pdf_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

withr::local_envvar(
  R_USER_CACHE_DIR = tempfile(),
  EUNOMIA_DATA_FOLDER = Sys.getenv("EUNOMIA_DATA_FOLDER", unset = tempfile())
)
```

We can split specific events into *acute* and *therapy* events. We do this by selecting our events of interest by `cohort_definition_id` (or `cohortId`) in the `splitEventCOhorts` parameter. We then set a cutoff for the minimum amount of **days** we would like to classify as *therapy* with `splitTime`. The first *n* days will be classified as *acute* and remaining duration will be classified as *therapy*.

![](./figures/a04_splitTime_1.png){#id .class width=100%}

Let's say we want to assume that the first 60 days of our treatment is acute, and beyond that therapy.
```{r, eval=FALSE}
outputEnv <- computePathways(
  cohorts = cohorts,
  cohortTableName = "cohort_table",
  cdm = cdm,
  splitEventCohorts = c(1, 2),
  splitTime = 30
)
```

![](./figures/a04_splitTime_2.png){#id .class width=100%}
