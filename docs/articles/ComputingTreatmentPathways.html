<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Computing Treatment Pathways • TreatmentPatterns</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Computing Treatment Pathways">
<meta property="og:description" content="TreatmentPatterns">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TreatmentPatterns</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.6.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ComputingTreatmentPathways.html">Computing Treatment Pathways</a>
    </li>
    <li>
      <a href="../articles/PareReport.html">PaRe Report: TreatmentPatterns [2.6.1]</a>
    </li>
    <li>
      <a href="../articles/usingTreatmentPatternsShinyModules.html">Using TreatmentPatterns' Shiny Modules</a>
    </li>
    <li>
      <a href="../articles/DefiningCohorts.html">Defining Cohorts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/darwin-eu-dev/TreatmentPatterns/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ComputingTreatmentPathways_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="ComputingTreatmentPathways_files/sequences-0.1/sequences.css" rel="stylesheet">
<script src="ComputingTreatmentPathways_files/sunburst-binding-2.1.8/sunburst.js"></script><script src="ComputingTreatmentPathways_files/d3-4.5.0/d3.min.js"></script><script src="ComputingTreatmentPathways_files/sankey-1/sankey.js"></script><script src="ComputingTreatmentPathways_files/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Computing Treatment Pathways</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/darwin-eu-dev/TreatmentPatterns/blob/HEAD/vignettes/articles/ComputingTreatmentPathways.Rmd" class="external-link"><code>vignettes/articles/ComputingTreatmentPathways.Rmd</code></a></small>
      <div class="hidden name"><code>ComputingTreatmentPathways.Rmd</code></div>

    </div>

    
    
<p>In <strong>1. Defining Cohorts</strong> we discussed how to define
and generate cohorts for <code>TreatmentPatterns</code>. In this section
we assume you are able to generate a cohort table using either
<code>CohortGenerator</code> or <code>CDMConnector</code>.</p>
<p>Lets generate our Viral Sinusitis dummy cohorts provided in
<code>TreatmentPatterns</code> using <code>CDMConnector</code>.</p>
<div class="section level2">
<h2 id="generating-cohorts">Generating Cohorts<a class="anchor" aria-label="anchor" href="#generating-cohorts"></a>
</h2>
<p>First we need to read in our cohorts.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'CDMConnector' was built under R version 4.3.2</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortSet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/read_cohort_set.html" class="external-link">readCohortSet</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"TreatmentPatterns"</span>, <span class="st">"exampleCohorts"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortSet</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8 × 5</span></span></span>
<span><span class="co">##   cohort_definition_id cohort_name    cohort       json   cohort_name_snakecase</span></span>
<span><span class="co">##                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                    1 Acetaminophen  <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  acetaminophen        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                    2 Amoxicillin    <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  amoxicillin          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                    3 Aspirin        <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  aspirin              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                    4 Clavulanate    <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  clavulanate          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>                    5 Death          <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  death                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>                    6 Doxylamine     <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  doxylamine           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>                    7 PenicillinV    <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  penicillin_v         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>                    8 ViralSinusitis <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>  viral_sinusitis</span></span></code></pre>
<p>Then we can open a connection to our database, in this case
Eunomia.</p>
<pre><code><span><span class="co">## Warning: package 'DatabaseConnector' was built under R version 4.3.2</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'DatabaseConnector'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:CDMConnector':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     dbms, insertTable</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Download completed!</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span></span>
<span>  drv <span class="op">=</span> <span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/duckdb/man/duckdb.html" class="external-link">duckdb</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dbdir <span class="op">=</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/eunomiaDir.html" class="external-link">eunomia_dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cdm_from_con.html" class="external-link">cdmFromCon</a></span><span class="op">(</span></span>
<span>  con <span class="op">=</span> <span class="va">con</span>,</span>
<span>  cdmSchema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  writeSchema <span class="op">=</span> <span class="st">"main"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span></span></code></pre></div>
<pre><code><span><span class="co">## # OMOP CDM reference (tbl_duckdb_connection)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength</span></span></code></pre>
<p>Finally we can generate our cohort set as a cohort table into the
database</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateCohortSet.html" class="external-link">generateCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  cohortSet <span class="op">=</span> <span class="va">cohortSet</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Generating 8 cohorts</span></span></code></pre>
<pre><code>## 
 [36mℹ [39m Generating cohort (1/8) - Acetaminophen)

 [32m✔ [39m Generating cohort (1/8) - Acetaminophen)  [38;5;249m[212ms] [39m
## 
 [36mℹ [39m Generating cohort (2/8) - Amoxicillin)

 [32m✔ [39m Generating cohort (2/8) - Amoxicillin)  [38;5;249m[123ms] [39m
## 
 [36mℹ [39m Generating cohort (3/8) - Aspirin)

 [32m✔ [39m Generating cohort (3/8) - Aspirin)  [38;5;249m[97ms] [39m
## 
 [36mℹ [39m Generating cohort (4/8) - Clavulanate)

 [32m✔ [39m Generating cohort (4/8) - Clavulanate)  [38;5;249m[98ms] [39m
## 
 [36mℹ [39m Generating cohort (5/8) - Death)

 [32m✔ [39m Generating cohort (5/8) - Death)  [38;5;249m[54ms] [39m
## 
 [36mℹ [39m Generating cohort (6/8) - Doxylamine)

 [32m✔ [39m Generating cohort (6/8) - Doxylamine)  [38;5;249m[93ms] [39m
## 
 [36mℹ [39m Generating cohort (7/8) - PenicillinV)

 [32m✔ [39m Generating cohort (7/8) - PenicillinV)  [38;5;249m[101ms] [39m
## 
 [36mℹ [39m Generating cohort (8/8) - ViralSinusitis)

 [32m✔ [39m Generating cohort (8/8) - ViralSinusitis)  [38;5;249m[133ms] [39m</code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort_table</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8 × 3</span></span></span>
<span><span class="co">##   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">##                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                    1           <span style="text-decoration: underline;">2</span>679            <span style="text-decoration: underline;">2</span>679</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                    2           <span style="text-decoration: underline;">2</span>130            <span style="text-decoration: underline;">2</span>130</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                    3           <span style="text-decoration: underline;">1</span>927            <span style="text-decoration: underline;">1</span>927</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                    4           <span style="text-decoration: underline;">2</span>021            <span style="text-decoration: underline;">2</span>021</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>                    6           <span style="text-decoration: underline;">1</span>393            <span style="text-decoration: underline;">1</span>393</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>                    7           <span style="text-decoration: underline;">1</span>732            <span style="text-decoration: underline;">1</span>732</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>                    8           <span style="text-decoration: underline;">2</span>159            <span style="text-decoration: underline;">2</span>159</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>                    5              0               0</span></span></code></pre>
<p>We can see that all our cohorts are generated in the cohort table.
The cohort with <em>cohort_definition_id</em> 5 has a count of 0, this
is the <em>Death</em> cohort. This is not detrimental, as exit cohorts
are optional, but good to know that Death will not show up in our
results.</p>
</div>
<div class="section level2">
<h2 id="computing-pathways">Computing pathways<a class="anchor" aria-label="anchor" href="#computing-pathways"></a>
</h2>
<p>The <code>computePathways</code> function of
<code>TreatmentPatterns</code> allows us to compute treatment pathways
in our cohort table. In order to do this we need to pre-specify some
parameters.</p>
<p>According to the documentation we need a <code>data.frame</code> that
specifies what cohort is of which type.</p>
<blockquote>
<p>Data frame containing the following columns and data types:</p>
<p>cohortId numeric(1) Cohort ID’s of the cohorts to be used in the
cohort table.</p>
<p>cohortName character(1) Cohort names of the cohorts to be used in the
cohort table.</p>
<p>type character(1) [“target”, “event’,”exit”] Cohort type, describing
if the cohort is a target, event, or exit cohort</p>
</blockquote>
<p>We are able to re-use our <code>cohortSet</code> for this. As it
already contains the cohort ID’s and cohort names. We only have to
remove the <code>cohort</code> and <code>json</code> columns, add a
<code>type</code> column, and rename <code>cohort_definition_id</code>
to <code>cohortId</code> and <code>cohort_name</code> to
<code>cohortName</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="va">cohortSet</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Remove 'cohort' and 'json' columns</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"cohort"</span>, <span class="op">-</span><span class="st">"json"</span>, <span class="op">-</span><span class="st">"cohort_name_snakecase"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"event"</span>, <span class="st">"event"</span>, <span class="st">"event"</span>, <span class="st">"event"</span>, <span class="st">"exit"</span>, <span class="st">"event"</span>, <span class="st">"event"</span>, <span class="st">"target"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    cohortId <span class="op">=</span> <span class="st">"cohort_definition_id"</span>,</span>
<span>    cohortName <span class="op">=</span> <span class="st">"cohort_name"</span>,</span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">cohorts</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8 × 3</span></span></span>
<span><span class="co">##   cohortId cohortName     type  </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>        1 Acetaminophen  event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>        2 Amoxicillin    event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>        3 Aspirin        event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>        4 Clavulanate    event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>        5 Death          exit  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>        6 Doxylamine     event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>        7 PenicillinV    event </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>        8 ViralSinusitis target</span></span></code></pre>
<p>With our <code>data.frame</code> of cohort types, CDM reference, and
the cohort table name in our database we can compute the treatment
pathways, with all of the other settings as their defaults.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/darwin-eu-dev/TreatmentPatterns" class="external-link">TreatmentPatterns</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">defaultSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/computePathways.html">computePathways</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span></code></pre>
<pre><code><span><span class="co">## Construct treatment pathways, this may take a while for larger datasets.</span></span></code></pre>
<pre><code><span><span class="co">## Original number of rows: 8352</span></span></code></pre>
<pre><code><span><span class="co">## After eraCollapseSize: 0</span></span></code></pre>
<pre><code><span><span class="co">## Selected 1544 </span></span>
<span><span class="co">## out of 8352 rows</span></span>
<span><span class="co">## Iteration: 1</span></span>
<span><span class="co">## Switches: 8352</span></span>
<span><span class="co">## FRFS Combinations: 4</span></span>
<span><span class="co">## LRFS Combinations: 1527</span></span></code></pre>
<pre><code><span><span class="co">## Selected 4 </span></span>
<span><span class="co">## out of 559 rows</span></span>
<span><span class="co">## Iteration: 2</span></span>
<span><span class="co">## Switches: 559</span></span>
<span><span class="co">## FRFS Combinations: 0</span></span>
<span><span class="co">## LRFS Combinations: 4</span></span></code></pre>
<pre><code><span><span class="co">## After combinationWindow: 555</span></span></code></pre>
<pre><code><span><span class="co">## Time needed to execute combination window 0.067957882086436</span></span></code></pre>
<pre><code><span><span class="co">## Order the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## After filterTreatments: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding drug sequence number.</span></span></code></pre>
<pre><code><span><span class="co">## After maxPathLength: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding concept names.</span></span></code></pre>
<pre><code><span><span class="co">## Ordering the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## constructPathways done.</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">defaultSettings</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># Andromeda object</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Physical location:  C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED\file314c2bbf66a7.sqlite</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Tables:</span></span>
<span><span class="co">## $addRowsFRFS_1 (personId, indexYear, eventCohortId, eventStartDate, eventEndDate, type, age, sex, durationEra, sortOrder, gapPrevious, selectedRows, switch, combinationFRFS, combinationLRFS, eventStartDateNext, eventEndDatePrevious, eventEndDateNext, eventCohortIdPrevious)</span></span>
<span><span class="co">## $addRowsFRFS_2 (personId, indexYear, eventCohortId, eventStartDate, age, sex, eventEndDate, durationEra, gapPrevious, sortOrder, selectedRows, switch, combinationFRFS, combinationLRFS, eventStartDateNext, eventEndDatePrevious, eventEndDateNext, eventCohortIdPrevious)</span></span>
<span><span class="co">## $addRowsLRFS_1 (personId, indexYear, eventCohortId, eventStartDate, eventEndDate, type, age, sex, durationEra, sortOrder, gapPrevious, selectedRows, switch, combinationFRFS, combinationLRFS, eventStartDateNext, eventEndDatePrevious, eventEndDateNext, eventCohortIdPrevious, checkDuration)</span></span>
<span><span class="co">## $addRowsLRFS_2 (personId, indexYear, eventCohortId, eventStartDate, age, sex, eventEndDate, durationEra, gapPrevious, sortOrder, selectedRows, switch, combinationFRFS, combinationLRFS, eventStartDateNext, eventEndDatePrevious, eventEndDateNext, eventCohortIdPrevious, checkDuration)</span></span>
<span><span class="co">## $cohortTable (cohortId.x, personId, startDate.x, endDate.x, age.x, sex.x, type.x, cohortId.y, startDate.y, endDate.y, age.y, sex.y, type.y, indexYear, indexDate)</span></span>
<span><span class="co">## $cohorts (cohortId, cohortName, type)</span></span>
<span><span class="co">## $currentCohorts (cohortId, personId, startDate, endDate, age, sex)</span></span>
<span><span class="co">## $eventCohorts (cohortId, personId, startDate, endDate, age, sex, type)</span></span>
<span><span class="co">## $exitCohorts (cohortId, personId, startDate, endDate, age, sex, type)</span></span>
<span><span class="co">## $exitHistory (personId, indexYear, eventCohortId, eventStartDate, eventEndDate, age, sex, durationEra)</span></span>
<span><span class="co">## $labels (eventCohortId, eventCohortName)</span></span>
<span><span class="co">## $metadata (cdmSourceName, cdmSourceAbbreviation, cdmReleaseDate, vocabularyVersion, executionStartDate, packageVersion, rVersion, platform, execution_end_date)</span></span>
<span><span class="co">## $targetCohorts (cohortId, personId, startDate, endDate, age, sex, type, indexYear, indexDate)</span></span>
<span><span class="co">## $treatmentHistory (eventCohortId, personId, indexYear, eventStartDate, age, sex, eventEndDate, durationEra, sortOrder, eventSeq, eventCohortName)</span></span></code></pre>
<p>The output of <code>computePathways</code> is an <a href="https://ohdsi.github.io/Andromeda/" class="external-link">Andromeda</a> environment,
which allows us to investigate intermediate results and patient-level
data. <strong>This data is not sharable.</strong></p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># treatmentHistory table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">defaultSettings</span><span class="op">$</span><span class="va">treatmentHistory</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># Source:   SQL [6 x 11]</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Database: sqlite 3.41.2 [C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED\file314c2bbf66a7.sqlite]</span></span></span>
<span><span class="co">##   eventCohortId personId indexYear eventStartDate   age sex    eventEndDate</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1                 <span style="text-decoration: underline;">3</span>615      <span style="text-decoration: underline;">1</span>960          -<span style="color: #BB0000; text-decoration: underline;">3</span><span style="color: #BB0000;">408</span>    11 FEMALE        -<span style="color: #BB0000; text-decoration: underline;">3</span><span style="color: #BB0000;">373</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1                   82      <span style="text-decoration: underline;">1</span>973           <span style="text-decoration: underline;">1</span>352    12 FEMALE         <span style="text-decoration: underline;">1</span>412</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 1                  625      <span style="text-decoration: underline;">1</span>974           <span style="text-decoration: underline;">1</span>819     2 MALE           <span style="text-decoration: underline;">1</span>849</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 1                  729      <span style="text-decoration: underline;">1</span>962          -<span style="color: #BB0000; text-decoration: underline;">2</span><span style="color: #BB0000;">716</span>     1 FEMALE        -<span style="color: #BB0000; text-decoration: underline;">2</span><span style="color: #BB0000;">626</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 1                 <span style="text-decoration: underline;">4</span>801      <span style="text-decoration: underline;">1</span>972           <span style="text-decoration: underline;">4</span>829    12 FEMALE         <span style="text-decoration: underline;">4</span>919</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 1                 <span style="text-decoration: underline;">1</span>566      <span style="text-decoration: underline;">1</span>970            231     3 MALE            261</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 4 more variables: durationEra &lt;int&gt;, sortOrder &lt;dbl&gt;, eventSeq &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   eventCohortName &lt;chr&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># metadata table</span></span>
<span><span class="va">defaultSettings</span><span class="op">$</span><span class="va">metadata</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># Source:   table&lt;metadata&gt; [1 x 9]</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Database: sqlite 3.41.2 [C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED\file314c2bbf66a7.sqlite]</span></span></span>
<span><span class="co">##   cdmSourceName           cdmSourceAbbreviation cdmReleaseDate vocabularyVersion</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Synthea synthetic heal… Synthea               2019-05-25     v5.0 18-JAN-19   </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: executionStartDate &lt;chr&gt;, packageVersion &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   rVersion &lt;chr&gt;, platform &lt;chr&gt;, execution_end_date &lt;chr&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First Recieved First Stopped</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">defaultSettings</span><span class="op">$</span><span class="va">addRowsFRFS_1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># Source:   SQL [4 x 19]</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Database: sqlite 3.41.2 [C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED\file314c2bbf66a7.sqlite]</span></span></span>
<span><span class="co">##   personId indexYear eventCohortId eventStartDate eventEndDate type    age sex  </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">1</span>282      <span style="text-decoration: underline;">3</span>828 2+1                     <span style="text-decoration: underline;">3</span>904         <span style="text-decoration: underline;">3</span>918 event     4 FEMA…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     <span style="text-decoration: underline;">1</span>572      <span style="text-decoration: underline;">1</span>060 2+1                     <span style="text-decoration: underline;">1</span>783         <span style="text-decoration: underline;">1</span>824 event    12 FEMA…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     <span style="text-decoration: underline;">4</span>749      <span style="text-decoration: underline;">3</span>125 4+2                     <span style="text-decoration: underline;">3</span>613         <span style="text-decoration: underline;">3</span>634 event     7 MALE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     <span style="text-decoration: underline;">4</span>816      <span style="text-decoration: underline;">4</span>900 4+2                     <span style="text-decoration: underline;">4</span>906         <span style="text-decoration: underline;">4</span>955 event     2 FEMA…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more variables: durationEra &lt;int&gt;, sortOrder &lt;dbl&gt;, gapPrevious &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   selectedRows &lt;dbl&gt;, switch &lt;dbl&gt;, combinationFRFS &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   combinationLRFS &lt;dbl&gt;, eventStartDateNext &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   eventEndDatePrevious &lt;int&gt;, eventEndDateNext &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   eventCohortIdPrevious &lt;chr&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Last Recieved Last Stopped</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">defaultSettings</span><span class="op">$</span><span class="va">addRowsLRFS_1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># Source:   SQL [6 x 20]</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Database: sqlite 3.41.2 [C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED\file314c2bbf66a7.sqlite]</span></span></span>
<span><span class="co">##   personId indexYear eventCohortId eventStartDate eventEndDate type    age sex  </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>        1     -<span style="color: #BB0000; text-decoration: underline;">6</span><span style="color: #BB0000;">173</span> 4                       -<span style="color: #BB0000;">926</span>         -<span style="color: #BB0000;">926</span> event    18 MALE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>        7       920 2                       <span style="text-decoration: underline;">6</span>068         <span style="text-decoration: underline;">6</span>068 event    18 FEMA…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>        9      <span style="text-decoration: underline;">4</span>502 1                       <span style="text-decoration: underline;">4</span>516         <span style="text-decoration: underline;">4</span>516 event     4 FEMA…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>       11     -<span style="color: #BB0000; text-decoration: underline;">3</span><span style="color: #BB0000;">476</span> 2                        215          215 event    17 MALE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>       12     -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">958</span> 2                       <span style="text-decoration: underline;">9</span>600         <span style="text-decoration: underline;">9</span>600 event    33 FEMA…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>       16      <span style="text-decoration: underline;">1</span>622 2                       <span style="text-decoration: underline;">5</span>716         <span style="text-decoration: underline;">5</span>716 event    14 FEMA…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 12 more variables: durationEra &lt;int&gt;, sortOrder &lt;dbl&gt;, gapPrevious &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   selectedRows &lt;dbl&gt;, switch &lt;dbl&gt;, combinationFRFS &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   combinationLRFS &lt;dbl&gt;, eventStartDateNext &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   eventEndDatePrevious &lt;int&gt;, eventEndDateNext &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   eventCohortIdPrevious &lt;chr&gt;, checkDuration &lt;dbl&gt;</span></span></span></code></pre>
<p><code>DatabaseConnector</code> is also supported. The following
parameters are required <strong>instead</strong> of
<code>cdm</code>:</p>
<ol style="list-style-type: decimal">
<li>
<code>connectionDetails</code>: ConnectionDetails object form <a href="https://ohdsi.github.io/DatabaseConnector/" class="external-link">DatabaseConnector</a>.</li>
<li>
<code>cdmSchema</code>: Schema where the CDM exists.</li>
<li>
<code>resultSchema</code>: Schema to write the cohort table to.</li>
<li>
<code>tempEmulationSchema</code>: Some database platforms like
Oracle and Impala do not truly support temp tables. To emulate temp
tables, provide a schema with write privileges where temp tables can be
created.</li>
</ol>
<p>The following code snippet works with <code>Eunomia</code>, a cohort
table (cohort_table) exists in the database, and a <code>cohorts</code>
data frame has been created.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/computePathways.html">computePathways</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="va">cohortTableName</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="fu">Eunomia</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Eunomia/man/getEunomiaConnectionDetails.html" class="external-link">getEunomiaConnectionDetails</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cdmSchema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  resultSchema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pathway-settings">Pathway settings<a class="anchor" aria-label="anchor" href="#pathway-settings"></a>
</h2>
<p>Even though the default settings work well for most use cases, it
might not work for all situations. The settings below allow us to
influence how the events of interest should be processed to form
treatment pathways.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="27%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>periodPriorToIndex</td>
<td>0</td>
<td>Number of days prior to the index date of the target cohort that
event cohorts are allowed to start</td>
</tr>
<tr class="even">
<td>minEraDuration</td>
<td>0</td>
<td>Minimum time an event era should last to be included in
analysis</td>
</tr>
<tr class="odd">
<td>eraCollapseSize</td>
<td>30</td>
<td>Window of time between which two eras of the same event cohort are
collapsed into one era</td>
</tr>
<tr class="even">
<td>combinationWindow</td>
<td>30</td>
<td>Window of time two event cohorts need to overlap to be considered a
combination treatment</td>
</tr>
<tr class="odd">
<td>minPostCombinationDuration</td>
<td>30</td>
<td>Minimum time an event era before or after a generated combination
treatment should last to be included in analysis</td>
</tr>
<tr class="even">
<td>filterTreatments</td>
<td>First</td>
<td>Select first occurrence of (‘First’); changes between (‘Changes’);
or all event cohorts (‘All’).</td>
</tr>
<tr class="odd">
<td>maxPathLength</td>
<td>5</td>
<td>Maximum number of steps included in treatment pathway</td>
</tr>
</tbody>
</table>
<p>The following figure shows how each of these parameters affect the
computation of the treatment pathway.</p>
<p><img src="../reference/figures/pathwaysettings.png" alt="pathwaySettings"> You can add these settings to the
<code>computePathways</code> function call. Lets see what happens when
we set our <code>minEraDuration</code> to <strong>60</strong>, but keep
the rest of the settings mentioned as their default values.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">minEra60</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/computePathways.html">computePathways</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  <span class="co"># Pathway settings</span></span>
<span>  periodPriorToIndex <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  minEraDuration <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  eraCollapseSize <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  combinationWindow <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  minPostCombinationDuration <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  filterTreatments <span class="op">=</span> <span class="st">"First"</span>,</span>
<span>  maxPathLength <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span></code></pre>
<pre><code><span><span class="co">## Construct treatment pathways, this may take a while for larger datasets.</span></span></code></pre>
<pre><code><span><span class="co">## Original number of rows: 336</span></span></code></pre>
<pre><code><span><span class="co">## After eraCollapseSize: 0</span></span></code></pre>
<pre><code><span><span class="co">## Selected 45 </span></span>
<span><span class="co">## out of 336 rows</span></span>
<span><span class="co">## Iteration: 1</span></span>
<span><span class="co">## Switches: 336</span></span>
<span><span class="co">## FRFS Combinations: 0</span></span>
<span><span class="co">## LRFS Combinations: 45</span></span></code></pre>
<pre><code><span><span class="co">## After combinationWindow: 291</span></span></code></pre>
<pre><code><span><span class="co">## Time needed to execute combination window 0.0370030840237935</span></span></code></pre>
<pre><code><span><span class="co">## Order the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## After filterTreatments: 291</span></span></code></pre>
<pre><code><span><span class="co">## Adding drug sequence number.</span></span></code></pre>
<pre><code><span><span class="co">## After maxPathLength: 291</span></span></code></pre>
<pre><code><span><span class="co">## Adding concept names.</span></span></code></pre>
<pre><code><span><span class="co">## Ordering the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## constructPathways done.</span></span></code></pre>
<p>Number of treatments with a minimum duration of greater or equal to 0
days.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">defaultSettings</span><span class="op">$</span><span class="va">treatmentHistory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 554</span></span></code></pre>
<p>Number of treatments with a minimum duration of greater or equal to
60 days.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">minEra60</span><span class="op">$</span><span class="va">treatmentHistory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 291</span></span></code></pre>
<div class="section level3">
<h3 id="acute-and-therapy-splits">Acute and Therapy splits<a class="anchor" aria-label="anchor" href="#acute-and-therapy-splits"></a>
</h3>
<p>We can also split our defined event cohorts into
<strong>acute</strong> and <strong>therapy</strong> cohorts.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>splitEventCohorts</td>
<td>Specify event cohort ID’s (i.e. <code>c(1, 2, 3)</code> to split in
acute (&lt; splitTime days) and therapy (&gt;= splitTime days). As an
example treatment <strong>Drug A</strong> could be split into
<strong>Drug A (therapy)</strong> and <strong>Drug A (acute)</strong>.
And we could set our splitTime to <em>30</em>. <strong>Drug A
(acute)</strong> would be the time before day 0-29 and <strong>Drug A
(therapy)</strong> would be the day 30 or later.</td>
</tr>
<tr class="even">
<td>splitTime</td>
<td>Specify number of days at which each of the split event cohorts
should be split in acute and therapy (i.e. <code>c(20, 30, 10)</code>).
The length of <code>splitTime</code> must equal the length of
<code>splitEventCohorts</code>
</td>
</tr>
</tbody>
</table>
<p>Let’s say we want to assume that the first 60 days of our treatment
is acute, and beyond that therapy.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">splitAcuteTherapy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/computePathways.html">computePathways</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  <span class="co"># Split settings</span></span>
<span>  splitEventCohorts <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  splitTime <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span></code></pre>
<pre><code><span><span class="co">## Construct treatment pathways, this may take a while for larger datasets.</span></span></code></pre>
<pre><code><span><span class="co">## Original number of rows: 8352</span></span></code></pre>
<pre><code><span><span class="co">## After eraCollapseSize: 0</span></span></code></pre>
<pre><code><span><span class="co">## Selected 1544 </span></span>
<span><span class="co">## out of 8352 rows</span></span>
<span><span class="co">## Iteration: 1</span></span>
<span><span class="co">## Switches: 8352</span></span>
<span><span class="co">## FRFS Combinations: 4</span></span>
<span><span class="co">## LRFS Combinations: 1527</span></span></code></pre>
<pre><code><span><span class="co">## Selected 4 </span></span>
<span><span class="co">## out of 559 rows</span></span>
<span><span class="co">## Iteration: 2</span></span>
<span><span class="co">## Switches: 559</span></span>
<span><span class="co">## FRFS Combinations: 0</span></span>
<span><span class="co">## LRFS Combinations: 4</span></span></code></pre>
<pre><code><span><span class="co">## After combinationWindow: 555</span></span></code></pre>
<pre><code><span><span class="co">## Time needed to execute combination window 0.0685306509335836</span></span></code></pre>
<pre><code><span><span class="co">## Order the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## After filterTreatments: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding drug sequence number.</span></span></code></pre>
<pre><code><span><span class="co">## After maxPathLength: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding concept names.</span></span></code></pre>
<pre><code><span><span class="co">## Ordering the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## constructPathways done.</span></span></code></pre>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">splitAcuteTherapy</span><span class="op">$</span><span class="va">treatmentHistory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">eventCohortName</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Acetaminophen (acute)"               </span></span>
<span><span class="co">## [2] "Acetaminophen (acute)+Amoxicillin"   </span></span>
<span><span class="co">## [3] "Acetaminophens (therapy)"            </span></span>
<span><span class="co">## [4] "Acetaminophens (therapy)+Amoxicillin"</span></span>
<span><span class="co">## [5] "Amoxicillin"                         </span></span>
<span><span class="co">## [6] "Amoxicillin+Clavulanate"             </span></span>
<span><span class="co">## [7] "Aspirin"                             </span></span>
<span><span class="co">## [8] "Clavulanate"</span></span></code></pre>
<p>We can see that our Acetaminophen cohorts are split into
Acetaminophen <strong>(acute)</strong> and <strong>(therapy)</strong>.
<em>Acute</em> labels all the Acetaminophen cohorts lasting less than
our defined <code>splitTime</code>, in this case 60 days.
<em>Therapy</em> labels all the Acetaminophen cohorts lasting 60 days or
more.</p>
</div>
<div class="section level3">
<h3 id="include-treatments-in-a-time-frame">Include treatments in a time frame<a class="anchor" aria-label="anchor" href="#include-treatments-in-a-time-frame"></a>
</h3>
<p>We can dictate in what time frame we want to look. We can look from
the start date of our target cohort and on wards, or we can look before
the end date of our target cohort. By default
<code>TreatmentPatterns</code> looks from the start date and
onwards.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">includeEndDate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/computePathways.html">computePathways</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  <span class="co"># Split settings</span></span>
<span>  includeTreatments <span class="op">=</span> <span class="st">"endDate"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span></code></pre>
<pre><code><span><span class="co">## Construct treatment pathways, this may take a while for larger datasets.</span></span></code></pre>
<pre><code><span><span class="co">## Original number of rows: 8345</span></span></code></pre>
<pre><code><span><span class="co">## After eraCollapseSize: 0</span></span></code></pre>
<pre><code><span><span class="co">## Selected 1543 </span></span>
<span><span class="co">## out of 8345 rows</span></span>
<span><span class="co">## Iteration: 1</span></span>
<span><span class="co">## Switches: 8345</span></span>
<span><span class="co">## FRFS Combinations: 4</span></span>
<span><span class="co">## LRFS Combinations: 1526</span></span></code></pre>
<pre><code><span><span class="co">## Selected 4 </span></span>
<span><span class="co">## out of 559 rows</span></span>
<span><span class="co">## Iteration: 2</span></span>
<span><span class="co">## Switches: 559</span></span>
<span><span class="co">## FRFS Combinations: 0</span></span>
<span><span class="co">## LRFS Combinations: 4</span></span></code></pre>
<pre><code><span><span class="co">## After combinationWindow: 555</span></span></code></pre>
<pre><code><span><span class="co">## Time needed to execute combination window 0.0694602529207865</span></span></code></pre>
<pre><code><span><span class="co">## Order the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## After filterTreatments: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding drug sequence number.</span></span></code></pre>
<pre><code><span><span class="co">## After maxPathLength: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding concept names.</span></span></code></pre>
<pre><code><span><span class="co">## Ordering the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## constructPathways done.</span></span></code></pre>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span></span>
<span>  <span class="va">includeEndDate</span><span class="op">$</span><span class="va">treatmentHistory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">personId</span><span class="op">)</span>,</span>
<span>  <span class="va">defaultSettings</span><span class="op">$</span><span class="va">treatmentHistory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">personId</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>In our example case for Viral Sinusitis it appears to not matter, as
the personID’s are identical.</p>
</div>
</div>
<div class="section level2">
<h2 id="exporting-result-objects">Exporting result objects<a class="anchor" aria-label="anchor" href="#exporting-result-objects"></a>
</h2>
<p>The <code>export</code> function allows us to export the generated
result objects from <code>computePathways</code>. There are several
arguments that we can change to alter the behavior, depending on what we
are allowed to share.</p>
<div class="section level3">
<h3 id="mincellcount-and-censortype">minCellCount and censorType<a class="anchor" aria-label="anchor" href="#mincellcount-and-censortype"></a>
</h3>
<p>Let’s say we are only able to share results of groups of subjects
that have at least 5 subjects in them.</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tempDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">defaultSettings</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 1242 pathways with a frequency &lt;5 to 5.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/default/countsSex.csv</span></span></code></pre>
<p>We can also choose between different methods how to handle pathways
that fall below are specified <code>minCellCount</code>. These types are
<strong>1</strong>) <code>"cellCount"</code>, <strong>2</strong>)
<code>"remove"</code>, and <strong>3</strong>) <code>"mean"</code>.</p>
<p>We could say we want to censor all pathways that fall below the
<code>minCellCount</code> to be censored <em>to</em> the
<code>minCellCount</code>.</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">minEra60</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"minEra60_cellCount"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"minCellCount"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 988 pathways with a frequency &lt;5 to 5.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_cellCount/countsSex.csv</span></span></code></pre>
<p>Or we could completely remove them</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">minEra60</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"minEra60_remove"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"remove"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Removing 988 pathways with a frequency &lt;5.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_remove/countsSex.csv</span></span></code></pre>
<p>Or finally we can censor them as the mean of all the groups that fall
below the <code>minCellCount</code>.</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">minEra60</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"minEra60_mean"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 988 pathways with a frequency &lt;5 to mean.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/minEra60_mean/countsSex.csv</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="agewindow">ageWindow<a class="anchor" aria-label="anchor" href="#agewindow"></a>
</h3>
<p>We can also specify an age window.</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">splitAcuteTherapy</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"splitAcuteTherapy_ageWindow3"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  ageWindow <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 2064 pathways with a frequency &lt;5 to mean.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindow3/countsSex.csv</span></span></code></pre>
<p>Or a collection of ages.</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">splitAcuteTherapy</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"splitAcuteTherapy_ageWindowMultiple"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  ageWindow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">150</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 1299 pathways with a frequency &lt;5 to mean.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/splitAcuteTherapy_ageWindowMultiple/countsSex.csv</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="archivename">archiveName<a class="anchor" aria-label="anchor" href="#archivename"></a>
</h3>
<p>Finally we can also specify an <code>archiveName</code> which is the
name of a zip-file to zip all our output csv-files to.</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span>  andromeda <span class="op">=</span> <span class="va">includeEndDate</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"includeEndDate"</span><span class="op">)</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  censorType <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  ageWindow <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  archiveName <span class="op">=</span> <span class="st">"output.zip"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 1834 pathways with a frequency &lt;5 to mean.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/countsSex.csv</span></span></code></pre>
<pre><code><span><span class="co">## Zipping files to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/includeEndDate/output.zip</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="all-in-one">All-in-one<a class="anchor" aria-label="anchor" href="#all-in-one"></a>
</h2>
<p>Instead of using <code>computePathways</code> and
<code>export</code>, instead we could use
<code>executeTreatmentPatterns</code>. Which is an all-in-one function
that trades full control for convenience.</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/executeTreatmentPatterns.html">executeTreatmentPatterns</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"all-in-one"</span><span class="op">)</span>,</span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  minEraDuration <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  eraCollapseSize <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  combinationWindow <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span></code></pre>
<pre><code><span><span class="co">## Construct treatment pathways, this may take a while for larger datasets.</span></span></code></pre>
<pre><code><span><span class="co">## Original number of rows: 8352</span></span></code></pre>
<pre><code><span><span class="co">## After eraCollapseSize: 0</span></span></code></pre>
<pre><code><span><span class="co">## Selected 1544 </span></span>
<span><span class="co">## out of 8352 rows</span></span>
<span><span class="co">## Iteration: 1</span></span>
<span><span class="co">## Switches: 8352</span></span>
<span><span class="co">## FRFS Combinations: 4</span></span>
<span><span class="co">## LRFS Combinations: 1527</span></span></code></pre>
<pre><code><span><span class="co">## Selected 4 </span></span>
<span><span class="co">## out of 559 rows</span></span>
<span><span class="co">## Iteration: 2</span></span>
<span><span class="co">## Switches: 559</span></span>
<span><span class="co">## FRFS Combinations: 0</span></span>
<span><span class="co">## LRFS Combinations: 4</span></span></code></pre>
<pre><code><span><span class="co">## After combinationWindow: 555</span></span></code></pre>
<pre><code><span><span class="co">## Time needed to execute combination window 0.0694160501162211</span></span></code></pre>
<pre><code><span><span class="co">## Order the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## After filterTreatments: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding drug sequence number.</span></span></code></pre>
<pre><code><span><span class="co">## After maxPathLength: 554</span></span></code></pre>
<pre><code><span><span class="co">## Adding concept names.</span></span></code></pre>
<pre><code><span><span class="co">## Ordering the combinations.</span></span></code></pre>
<pre><code><span><span class="co">## constructPathways done.</span></span></code></pre>
<pre><code><span><span class="co">## Writing metadata to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/metadata.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing treatmentPathways to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/treatmentPathways.csv</span></span></code></pre>
<pre><code><span><span class="co">## Censoring 1566 pathways with a frequency &lt;5 to mean.</span></span></code></pre>
<pre><code><span><span class="co">## Writing summaryStatsTherapyDuration to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/summaryStatsTherapyDuration.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsYearPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/countsYear.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsAgePath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/countsAge.csv</span></span></code></pre>
<pre><code><span><span class="co">## Writing countsSexPath to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/countsSex.csv</span></span></code></pre>
<pre><code><span><span class="co">## Zipping files to C:\Users\MVANKE~1\AppData\Local\Temp\RtmpoBvSED/all-in-one/TreatmentPatterns-Output.zip</span></span></code></pre>
<p>When using <code>DatabaseConnector</code> we can substitute the
<code>cdm</code> object with <code>connectionDetails</code>,
<code>cdmSchema</code>, <code>resultSchema</code>, and
<code>tempEmulationSchema</code>.</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/executeTreatmentPatterns.html">executeTreatmentPatterns</a></span><span class="op">(</span></span>
<span>  cohorts <span class="op">=</span> <span class="va">cohorts</span>,</span>
<span>  cohortTableName <span class="op">=</span> <span class="st">"cohort_table"</span>,</span>
<span>  outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"all-in-one"</span><span class="op">)</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="fu">Eunomia</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Eunomia/man/getEunomiaConnectionDetails.html" class="external-link">getEunomiaConnectionDetails</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cdmSchema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  resultSchema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minEraDuration <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  eraCollapseSize <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  combinationWindow <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="evaluating-output">Evaluating output<a class="anchor" aria-label="anchor" href="#evaluating-output"></a>
</h2>
<p>Now that we have exported our output, in various ways, we can
evaluate the output. As you may have noticed the <code>export</code>
function exports 6 csv-files: <strong>1</strong>) treatmentPathways.csv,
<strong>2</strong>) countsAge.csv, <strong>3</strong>) countsSex.csv,
<strong>4</strong>) countsYear.csv, <strong>5</strong>)
summaryStatsTherapyDuraion.csv, and <strong>6</strong>) metadata.csv</p>
<div class="section level3">
<h3 id="treatmentpathways">treatmentPathways<a class="anchor" aria-label="anchor" href="#treatmentpathways"></a>
</h3>
<p>The treatmentPathways file contains all the pathways found, with a
frequency, pairwise stratified by age group, sex and index year.</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">treatmentPathways</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"treatmentPathways.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">treatmentPathways</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            path freq  age    sex indexYear</span></span>
<span><span class="co">## 1 Acetaminophen    5 0-10 female      1951</span></span>
<span><span class="co">## 2 Acetaminophen    5 0-10 female      1953</span></span>
<span><span class="co">## 3 Acetaminophen    5 0-10 female      1956</span></span>
<span><span class="co">## 4 Acetaminophen    5 0-10 female      1957</span></span>
<span><span class="co">## 5 Acetaminophen    5 0-10 female      1959</span></span>
<span><span class="co">## 6 Acetaminophen    5 0-10 female      1960</span></span></code></pre>
<p>We are able to filter based on the strata, and filter on a frequency
&gt; 5.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all</span> <span class="op">&lt;-</span> <span class="va">treatmentPathways</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">age</span> <span class="op">==</span> <span class="st">"all"</span>,</span>
<span>    <span class="va">sex</span> <span class="op">==</span> <span class="st">"all"</span>,</span>
<span>    <span class="va">indexYear</span> <span class="op">==</span> <span class="st">"all"</span>,</span>
<span>    <span class="va">freq</span> <span class="op">&gt;</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can see the pathways contain the treatment names we provided in
our event cohorts. Besides that we also see the paths are annoted with a
<code>+</code> or <code>-</code>. The <code>+</code> indicates two
treatments are a combination therapy,
i.e. <code>Acetaminophen+Amoxicillin</code> is a combination of
<em>Acetaminophen</em> and <em>Amoxicillin</em>. The <code>-</code>
indicates a switch between treatments,
i.e. <code>Aspirin-Acetaminophen</code> is a switch from
<em>Aspirin</em> to <em>Acetaminophen</em>. Note that these combinations
and switches can occur in the same pathway,
i.e. <code>Amoxicillin+Clavulanate-Aspirin</code>. The first treatment
is a combination of <em>Amoxicillin</em> and <em>Clavulanate</em> that
switches to <em>Aspirin</em>.</p>
</div>
<div class="section level3">
<h3 id="countsage-countssex-and-countsyear">countsAge, countsSex, and countsYear<a class="anchor" aria-label="anchor" href="#countsage-countssex-and-countsyear"></a>
</h3>
<p>The countsAge, countsSex, and countsYear contain counts per age, sex,
and index year.</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"countsAge.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"countsSex.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"countsYear.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   age   n</span></span>
<span><span class="co">## 1   1 311</span></span>
<span><span class="co">## 2   2 550</span></span>
<span><span class="co">## 3   3 340</span></span>
<span><span class="co">## 4   4 181</span></span>
<span><span class="co">## 5   5 158</span></span>
<span><span class="co">## 6   6 107</span></span></code></pre>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      sex    n</span></span>
<span><span class="co">## 1 FEMALE 1092</span></span>
<span><span class="co">## 2   MALE 1067</span></span></code></pre>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   indexYear  n</span></span>
<span><span class="co">## 1      1950 43</span></span>
<span><span class="co">## 2      1951 40</span></span>
<span><span class="co">## 3      1952 54</span></span>
<span><span class="co">## 4      1953 47</span></span>
<span><span class="co">## 5      1954 47</span></span>
<span><span class="co">## 6      1955 49</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarystatstherapyduration">summaryStatsTherapyDuration<a class="anchor" aria-label="anchor" href="#summarystatstherapyduration"></a>
</h3>
<p>The summaryStatsTherapyDuration file contains some statistics
pertaining combination and mono-therapies. Like the mean, median,
minimum, and maximum durations. The standard deviation of durations, and
the count of each treatment type.</p>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"summaryStatsTherapyDuration.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   treatmentType avgDuration medianDuration       sd min max count</span></span>
<span><span class="co">## 1   combination    89.47692             84 48.59980  35 329  1711</span></span>
<span><span class="co">## 2   monotherapy    53.97751             44 23.84533  30 119   489</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="metadata">metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>The metadata file is a file that contains information about the
circumstances the analysis was performed in, and information about R,
and the CDM.</p>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tempDir</span>, <span class="st">"default"</span>, <span class="st">"metadata.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                       cdmSourceName cdmSourceAbbreviation cdmReleaseDate</span></span>
<span><span class="co">## 1 Synthea synthetic health database               Synthea     2019-05-25</span></span>
<span><span class="co">##   vocabularyVersion executionStartDate packageVersion</span></span>
<span><span class="co">## 1    v5.0 18-JAN-19         2024-01-26          2.6.3</span></span>
<span><span class="co">##                            rVersion           platform execution_end_date</span></span>
<span><span class="co">## 1 R version 4.3.1 (2023-06-16 ucrt) x86_64-w64-mingw32         2024-01-26</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="sunburst-plot-sankey-diagram">Sunburst Plot &amp; Sankey Diagram<a class="anchor" aria-label="anchor" href="#sunburst-plot-sankey-diagram"></a>
</h3>
<p>From the filtered treatmentPathways file we are able to create a
sunburst plot.</p>
<div class="sourceCode" id="cb195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/createSunburstPlot.html">createSunburstPlot</a></span><span class="op">(</span>treatmentPathways <span class="op">=</span> <span class="va">all</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>w <span class="op">=</span> <span class="fl">300</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sunburst html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5f414522b7ce8d151aa3" style="width:700px;height:432.632880098888px; position:relative;">
<div>
<div class="sunburst-main">
<div class="sunburst-sequence"></div>
<div class="sunburst-chart">
<div class="sunburst-explanation" style="visibility:hidden;"></div>
</div>
</div>
<div class="sunburst-sidebar">
<input type="checkbox" class="sunburst-togglelegend" style="visibility:hidden;">Legend
<div class="sunburst-legend" style="visibility:hidden;"></div>
</div>
</div>
</div>
<script type="application/json" data-for="htmlwidget-5f414522b7ce8d151aa3">{"x":{"data":{"children":[{"name":"Acetaminophen","children":[{"name":"Amoxicillin+Clavulanate","size":6,"colname":"X2"},{"name":"Aspirin","size":14,"colname":"X2"}],"size":206,"colname":"X1"},{"name":"Amoxicillin+Clavulanate","children":[],"size":48,"colname":"X1"},{"name":"Aspirin","children":[{"name":"Acetaminophen","size":12,"colname":"X2"},{"name":"Amoxicillin+Clavulanate","size":6,"colname":"X2"}],"size":211,"colname":"X1"},{"name":"None","children":[],"size":1646,"colname":"X1"}],"name":"root"},"options":{"legendOrder":null,"colors":null,"valueField":"size","percent":true,"count":false,"explanation":null,"breadcrumb":[],"legend":{"w":300},"sortFunction":"function (a, b) {return a.value - b.value;}","sumNodes":true}},"evals":["options.sortFunction"],"jsHooks":[]}</script><p>Or a Sankey Diagram.</p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/createSankeyDiagram.html">createSankeyDiagram</a></span><span class="op">(</span><span class="va">all</span><span class="op">)</span></span></code></pre></div>
<div class="sankeyNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-510294ad3355dcef3cfe" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-510294ad3355dcef3cfe">{"x":{"links":{"source":[0,0,0,1,2,2,2,3],"target":[4,5,6,6,4,6,7,6],"value":[0.28,0.65,9.59,2.23,0.28,9.82,0.5600000000000001,76.59]},"nodes":{"name":["1.Acetaminophen","1.Amoxicillin+Clavulanate","1.Aspirin","1.None","2.Amoxicillin+Clavulanate","2.Aspirin","2.Stopped","2.Acetaminophen"],"group":["1.Acetaminophen","1.Amoxicillin+Clavulanate","1.Aspirin","1.None","2.Amoxicillin+Clavulanate","2.Aspirin","2.Stopped","2.Acetaminophen"]},"options":{"NodeID":"names","NodeGroup":"names","LinkGroup":null,"colourScale":"d3.scaleOrdinal([\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\"])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"%","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script><p>Both plots are interactive in an HTML-environment, and are easy to
include in shiny applications.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aniek Markus, Maarten van Kessel.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
